name: CD

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  buildLinux:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Build and test
        run: |
          cd Platform.Data.Triplets.Kernel/
          make
          ./run.sh 
      - name: Publish
        run: bash ./publish-binaries.sh
      
  buildWindow:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v2
      - name: Build and test
        run: |
          cd Platform.Data.Triplets.Kernel/
          ls
          mingw32-make
          ./test 
      - name: Publish
        run: bash ./publish-binaries.sh

  buildMacOs:
    runs-on: macos-latest 
    steps:
      - uses: actions/checkout@v2
      - name: Build and test
        run: |
          cd Platform.Data.Triplets.Kernel/
          ls
          make
          ./run.sh
      - name: Publish
        run: bash ./publish-binaries.sh


